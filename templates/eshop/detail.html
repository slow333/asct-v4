{% extends 'base/base.html' %}
{% load static %}
{% load humanize %}
{% block title %} 물품 상세- {{ product.name }} {% endblock %}

{% block content %}

{% include 'eshop/_nav.html' %}

<div class="container mt-4">
    <div class="card shadow-sm border-0">
        <div class="row g-0">
            <div class="col-md-5 bg-light d-flex align-items-center justify-content-center">
                <div class="p-4">
                    <img src="{{product.image.url}}" alt="{{ product.name }}" width="400" height="400" class="img-fluid rounded shadow-sm object-fit-contain max-height-500">
                </div>
            </div>
            <div class="col-md-7">
                <div class="card-body p-4">
                    <div class="mb-2">
                        {% if product.category %}
                        <span class="badge bg-primary">{{ product.category }}</span>
                        {% endif %}
                        <span class="text-muted ms-2 small">생산자: {{ product.made_by }}</span>
                    </div>
                    <h1 class="card-title display-5 fw-bold mb-3">{{ product.name }}</h1>
                    <div class="mb-4">
                        <h3 class="text-danger fw-bold">가격: ￦{{ product.price|floatformat:0|intcomma }}</h3>
                        <p class="text-muted small">제고: {{ product.stock }} units</p>
                    </div>
                    <div class="mb-4">
                        <h5 class="fw-bold">제품 설명</h5>
                        <p class="card-text text-secondary line-height-1-7">{{ product.description|linebreaksbr }}</p>
                    </div>
                    <hr class="my-4">
                    <div class="d-flex gap-2">
                        <form action="" method="post" class="d-inline">
                            {% csrf_token %}
                            <input type="hidden" name="product_id" value="{{product.id}}">
                            <button type="submit" class="btn btn-primary btn-lg px-4">장바구니 추가</button>
                        </form>
                        <a href="{% url 'eshop:product_list' %}?page={{ request.GET.page|default:1 }}{% if request.GET.category %}&category={{ request.GET.category|urlencode }}{% endif %}" class="btn btn-outline-secondary btn-lg px-4">목록으로</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}